---
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title="Blog - chrishandy.net">
  <div class="space-y-8">
    <header class="space-y-4">
      <h1 class="text-3xl font-bold font-mono text-slate-100">&gt; blog</h1>
      <p class="text-slate-400 font-mono text-sm">
        thoughts on code, tech, and building things
      </p>
    </header>
    
    {posts.length === 0 && (
      <div class="bg-slate-800/50 border border-slate-700 rounded-lg p-6 text-center">
        <div class="font-mono text-slate-400 mb-2">404: posts not found</div>
        <p class="text-slate-500">Check back soon for new content!</p>
      </div>
    )}
    
    <div class="space-y-6">
      {posts.map((post) => (
        <article class="bg-slate-800/30 border border-slate-700 rounded-lg p-6 hover:border-blue-500/50 transition-all duration-300 group">
          <div class="flex items-start justify-between mb-4">
            <h2 class="text-xl font-semibold">
              <a 
                href={`/blog/${post.id}/`}
                class="text-slate-100 group-hover:text-blue-400 transition-colors"
              >
                {post.data.title}
              </a>
            </h2>
            <div class="flex items-center space-x-2">
              <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
            </div>
          </div>
          
          <div class="font-mono text-xs text-slate-500 mb-3">
            <FormattedDate date={post.data.pubDate} />
          </div>
          
          {post.data.description && (
            <p class="text-slate-300 leading-relaxed mb-4">
              {post.data.description}
            </p>
          )}
          
          <div class="flex items-center justify-between">
            <a 
              href={`/blog/${post.id}/`}
              class="font-mono text-sm text-blue-400 hover:text-blue-300 transition-colors flex items-center space-x-1"
            >
              <span>read_more</span>
              <span>â†’</span>
            </a>
            <div class="font-mono text-xs text-slate-600">
              ~/blog/{post.id}
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</BaseLayout>
