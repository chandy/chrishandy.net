---
import type { CollectionEntry } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';
import BaseLayout from "../layouts/BaseLayout.astro";

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<BaseLayout title={`${title} - chrishandy.net`}>
  <article class="space-y-8">
    <!-- Header -->
    <header class="space-y-6">
      <nav class="flex items-center space-x-2 text-sm font-mono text-slate-500">
        <a href="/" class="hover:text-blue-400 transition-colors">~</a>
        <span>/</span>
        <a href="/blog" class="hover:text-blue-400 transition-colors">blog</a>
        <span>/</span>
        <span class="text-slate-400">current_post</span>
      </nav>
      
      <div class="space-y-4">
        <h1 class="text-3xl md:text-4xl font-bold text-slate-100 leading-tight">
          {title}
        </h1>
        
        {description && (
          <p class="text-xl text-slate-300 leading-relaxed">
            {description}
          </p>
        )}
        
        <div class="flex items-center space-x-4 text-sm">
          <div class="flex items-center space-x-2">
            <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
            <span class="font-mono text-slate-400">
              <FormattedDate date={pubDate} />
            </span>
          </div>
          
          {updatedDate && (
            <div class="flex items-center space-x-2">
              <div class="w-2 h-2 bg-green-400 rounded-full"></div>
              <span class="font-mono text-slate-500 text-xs">
                updated <FormattedDate date={updatedDate} />
              </span>
            </div>
          )}
        </div>
      </div>
    </header>

    <!-- Hero Image -->
    {heroImage && (
      <div class="rounded-lg overflow-hidden border border-slate-700">
        <img 
          src={heroImage} 
          alt=""
          class="w-full h-64 md:h-80 object-cover"
        />
      </div>
    )}

    <!-- Content -->
    <div class="blog-content space-y-6 text-slate-300 leading-relaxed">
      <slot />
    </div>

    <!-- Footer -->
    <footer class="pt-8 mt-12 border-t border-slate-700">
      <div class="flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0">
        <div class="flex items-center space-x-4">
          <a 
            href="/blog"
            class="font-mono text-sm text-blue-400 hover:text-blue-300 transition-colors flex items-center space-x-1"
          >
            <span>‚Üê</span>
            <span>back_to_blog</span>
          </a>
        </div>
        
        <div class="flex items-center space-x-4 text-sm text-slate-500">
          <span class="font-mono">share:</span>
          <a 
            href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(title)}&url=${encodeURIComponent(`https://chrishandy.net/blog/${Astro.url.pathname.split('/').pop()}`)}`}
            target="_blank"
            rel="noopener noreferrer"
            class="font-mono text-blue-400 hover:text-blue-300 transition-colors"
          >
            twitter
          </a>
        </div>
      </div>
    </footer>
  </article>
</BaseLayout>